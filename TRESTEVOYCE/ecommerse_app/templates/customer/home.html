
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trestevoyce - Home</title>
  <link href="https://fonts.googleapis.com/css2?family=Cedarville+Cursive&family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

  <style>
    /* ADDED: SMOOTH SCROLLING */
    html {
      scroll-behavior: smooth;
    }

    /* ALL YOUR ORIGINAL STYLES */
    :root {
      --gold: #edab28;
      --nav-gradient: linear-gradient(to bottom, #ffffff 0%, #d4e4ff 100%);
      --border-thick: 1.5px solid #000;
      --border-gray: 1.5px solid #ccc;
    }

    * { box-sizing: border-box; }
    body { font-family: 'Inter', sans-serif; margin: 0; background-color: #fff; color: #000; }





/* --- ENHANCED NAVIGATION STYLES --- */
.navbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 5%;
  background:white; /* Solid Black Background */
  border-bottom: 2px solid var(--gold); /* Gold accent line */
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 2000;
  height: 85px;
  transition: all 0.3s ease;
}

.logo img {
  height: 50px;
  transition: transform 0.3s ease;
}

.logo img:hover {
  transform: scale(1.05);
}

.nav-links {
  list-style: none;
  display: flex;
  gap: 30px;
  margin: 0;
  padding: 0;
}

.nav-links li a {
  text-decoration: none;
  color: #333;
  font-weight: 700;
  font-size: 15px;
  position: relative;
  transition: color 0.3s ease;
  padding: 5px 0;
}

/* Underline Animation */
.nav-links li a::after {
  content: '';
  position: absolute;
  width: 0;
  height: 2px;
  bottom: 0;
  left: 0;
  background-color: var(--gold);
  transition: width 0.3s ease;
}

.nav-links li a:hover::after {
  width: 100%;
}

.nav-links li a:hover {
  color: #000;
}

.nav-links li a.active {
  color: var(--gold);
}

.nav-links li a.active::after {
  width: 100%;
}

/* Enhanced Search Box */
.search-box {
  position: relative;
  width: 300px;
}

.search-box input {
  width: 100%;
  padding: 10px 40px 10px 15px;
  border-radius: 25px;
  border: 1.5px solid #eee;
  background: #f8f9fa;
  font-weight: 500;
  transition: all 0.3s ease;
}

.search-box input:focus {
  outline: none;
  border-color: var(--gold);
  background: #fff;
  box-shadow: 0 4px 12px rgba(0,0,0,0.05);
  width: 320px; /* Expands on focus */
}

.search-box i {
  position: absolute;
  right: 15px;
  top: 50%;
  transform: translateY(-50%);
  color: #888;
  transition: color 0.3s ease;
}

.search-box input:focus + i {
  color: var(--gold);
}

/* Enhanced Icons */
.nav-icons {
  display: flex;
  gap: 20px;
  font-size: 22px;
  color: #333;
}

.icon-wrapper {
  position: relative;
  transition: transform 0.2s ease, color 0.2s ease;
}

.icon-wrapper:hover {
  transform: translateY(-2px);
  color: var(--gold);
}

.badge {
  position: absolute;
  top: -5px;
  right: -8px;
  background: #ff3b3b;
  color: white;
  font-size: 10px;
  height: 18px;
  width: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  font-weight: 900;
  border: 2px solid #fff;
}

    /* --- SIDEBARS --- */
    .sidebar-overlay {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.5); z-index: 2500; display: none;
    }
    .sidebar {
      position: fixed; top: 0; right: -420px; width: 400px; height: 100%;
      background: #fff; z-index: 3000; transition: 0.4s ease; padding: 25px;
      box-shadow: -5px 0 15px rgba(0,0,0,0.1); display: flex; flex-direction: column;
    }
    .sidebar.active { right: 0; }
    .sidebar-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px; }
    .sidebar-header h2 { margin: 0; font-size: 22px; font-weight: 900; display: flex; align-items: center; gap: 10px; }
    
    .user-info { display: flex; align-items: center; gap: 12px; margin-bottom: 20px; }
    .user-info i { font-size: 40px; color: #94a3b8; }
    .user-details h3 { margin: 0; font-size: 18px; font-weight: 900; }
    .user-details p { margin: 0; font-size: 14px; color: #64748b; }

    .menu-group { margin-bottom: 25px; }
    .menu-group h4 { margin-bottom: 15px; font-size: 18px; font-weight: 900; }
    .menu-item {
      display: flex; align-items: center; justify-content: space-between;
      padding: 12px 15px; border: 1.5px solid #eee; border-radius: 12px;
      margin-bottom: 10px; cursor: pointer; font-weight: 900;
    }
    .menu-item div { display: flex; align-items: center; gap: 15px; }
    .btn-logout { 
      background: #fce191; border: 1.5px solid #000; padding: 12px; 
      border-radius: 12px; font-weight: 900; cursor: pointer; width: 150px; align-self: center;
    }

    .wish-card {
      display: flex; gap: 15px; border: 1.5 solid #ccc; border-radius: 15px;
      padding: 12px; margin-bottom: 15px; align-items: center; position: relative;
    }
    .wish-card img { width: 90px; height: 90px; border-radius: 10px; object-fit: cover; }
    .wish-info { flex: 1; }
    .wish-info span { font-size: 12px; color: #555; display: block; }
    .wish-info h4 { margin: 5px 0; font-weight: 900; }
    .wish-info .price { color: #f97316; font-weight: 900; font-size: 18px; }
    .wish-actions { display: flex; align-items: center; gap: 10px; margin-top: 5px; }
    .btn-wish-cart { 
      background: #fde68a; border: 1.5px solid #000; padding: 5px 15px; 
      border-radius: 10px; font-weight: 900; display: flex; align-items: center; gap: 8px; cursor: pointer;
    }
    .btn-delete { font-size: 20px; color: #000; cursor: pointer; background: none; border: none; }

/* --- HELP CENTER SENDING STATE --- */
.btn-save-settings:disabled {
    cursor: not-allowed;
    background: #666 !important;
    border-color: #666 !important;
    color: #fff !important;
    opacity: 0.7;
}
/* --- ORDER STATUS TAGS --- */
.status-tag {
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 11px;
    font-weight: 900;
    text-transform: uppercase;
    display: inline-flex;
    align-items: center;
    gap: 6px;
}
/* Color Coding */
.status-processing { background: #fff4e5; color: #b07d00; border: 1px solid #ffd580; }
.status-shipped { background: #e5f6ff; color: #0077b0; border: 1px solid #80d4ff; }
.status-completed { background: #e5ffe5; color: #008000; border: 1px solid #80ff80; }


/* --- HERO SECTION --- */

.hero {
  margin-top: 85px; 
  height: 550px;
  background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), 
              url('IMAGES/homebg.jpeg'); 
  background-size: cover; 
  background-position: center;
  display: flex; 
  align-items: center; 
  justify-content: flex-end; /* Keeps the whole block on the right */
  padding-right: 12%; 
}

.hero-content { 
  display: flex;
  flex-direction: column;
  align-items: center; /* This centers the "Buy it" line and the Button */
  text-align: center;
}

.hero-content h1 { 
  font-family: 'Cedarville Cursive', cursive; 
  font-size: 80px; 
  color: #fff;
  line-height: 1.1;
  margin: 0;
  text-shadow: 2px 2px 15px rgba(0,0,0,0.5);
}


.btn-shop-now { 
  background: var(--gold); 
  color: #000;
  border: none; 
  padding: 14px 45px; 
  font-weight: 900; 
  border-radius: 4px; 
  cursor: pointer; 
  margin-top: 25px; 
  font-size: 16px;
  text-transform: uppercase;
  transition: 0.3s;
  width: fit-content; 
}

.btn-shop-now:hover {
  background: #f0cc85;
  transform: translateY(-3px);
}

    /* --- PRODUCT GRID --- */
    .main-container { padding: 30px 5%; }
    .page-title h2 { font-weight: 900; font-size: 28px; margin: 0; }
    .page-title p { color: #555; margin: 5px 0 25px; }
    .category-filters { display: flex; gap: 15px; margin-bottom: 30px; overflow-x: auto; padding-bottom: 10px; }
    .filter-btn {
      padding: 10px 20px; border: var(--border-thick); background: white; border-radius: 12px; 
      cursor: pointer; font-weight: 900; display: flex; align-items: center; gap: 10px; white-space: nowrap;
    }
    .filter-btn.active { background-color: #fce191; border-color: #fbc02d; }
    .filter-btn small { font-size: 10px; background: #eee; padding: 2px 5px; border-radius: 50%; margin-left: auto; }

    .section-box { border: 1.2px solid #d1d5db; border-radius: 20px; padding: 25px; margin-bottom: 40px; background: #fff; }
    .section-title-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
    .section-title-row h3 { font-size: 24px; font-weight: 900; margin: 0; }
    .see-all { text-decoration: none; color: #000; font-weight: 900; display: flex; align-items: center; gap: 5px; }
    .product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 20px; }
    .product-card { border: var(--border-thick); border-radius: 18px; padding: 12px; background: #fff; transition: 0.3s; cursor: pointer; position: relative; }
    .img-wrapper { width: 100%; height: 200px; background: #f8f8f8; border-radius: 12px; position: relative; overflow: hidden; }
    .img-wrapper img { width: 100%; height: 100%; object-fit: cover; }
    .heart-btn { 
      position: absolute; top: 10px; right: 10px; color: #fff; background: #888; 
      width: 35px; height: 35px; border-radius: 50%; display: flex; align-items: center; 
      justify-content: center; cursor: pointer; border: 2.5px solid #fff; z-index: 5;
    }
    .info { margin-top: 15px; }
    .info h4 { margin: 0 0 10px; font-weight: 900; font-size: 16px; }
    .price-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
    .price { font-weight: 900; font-size: 18px; }
    .add-btn { background: #fde68a; border: var(--border-thick); padding: 6px 15px; border-radius: 8px; font-weight: 900; cursor: pointer; }
    .selling-fast { 
      height: 32px; background: #ffdada; border-radius: 20px; position: relative; 
      overflow: hidden; border: 1px solid #ff9a9a; display: flex; align-items: center; justify-content: center;
    }
    .progress { position: absolute; left: 0; top: 0; height: 100%; background: linear-gradient(90deg, #ff4e00, #ffba00); }
    .selling-fast span { position: relative; z-index: 2; color: #fff; font-weight: 900; font-size: 11px; }

    /* --- PREMIUM FOOTER STYLES --- */
    footer {
      background: #000;
      color: #fff;
      padding: 60px 5% 20px;
      margin-top: 50px;
    }

    .footer-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 40px;
      border-bottom: 1px solid #333;
      padding-bottom: 40px;
    }

    .footer-links {
      list-style: none;
      padding: 0;
      font-size: 14px;
      line-height: 2;
    }

    .footer-links li a {
      color: #ccc;
      text-decoration: none;
      transition: 0.3s;
    }

    .footer-links li a:hover {
      color: var(--gold);
    }

    .newsletter-box {
      display: flex;
      border: 1.5px solid #fff;
      border-radius: 10px;
      overflow: hidden;
      margin-top: 15px;
    }

    .newsletter-box input {
      flex: 1;
      padding: 12px;
      border: none;
      background: transparent;
      color: #fff;
      outline: none;
    }

    .newsletter-box button {
      background: #fff;
      color: #000;
      border: none;
      padding: 0 15px;
      font-weight: 900;
      cursor: pointer;
    }

    #backToTop {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 50px;
      height: 50px;
      background-color: var(--gold);
      color: #000;
      border: 2px solid #000;
      border-radius: 50%;
      display: none;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      cursor: pointer;
      z-index: 5000;
      transition: 0.3s;
    }
    .toast-notification {
    position: fixed;
    bottom: -100px;
    left: 50%;
    transform: translateX(-50%);
    background: #333;
    color: #fff;
    padding: 15px 30px;
    border-radius: 50px;
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 700;
    z-index: 10000;
    transition: bottom 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}
.toast-notification.show { bottom: 50px; }

    /* --- PAGE STYLES --- */
    #product-display-section { display: none; padding: 100px 5% 40px; }
    .display-container {
      display: flex; gap: 40px; max-width: 1000px; margin: 0 auto;
      border: var(--border-gray); padding: 30px; border-radius: 25px; background: #fff;
    }
    .display-gallery { flex: 1; }
    .display-main-img { border: var(--border-gray); border-radius: 15px; padding: 10px; }
    .display-main-img img { width: 100%; border-radius: 10px; }
    .display-details { flex: 1.2; display: flex; flex-direction: column; gap: 20px; }
    .display-price { border: var(--border-gray); padding: 15px; font-size: 40px; font-weight: 900; color: #ff3b3b; }
    .display-price span { color: #000; font-size: 50px; }
    .display-desc { border: var(--border-gray); border-radius: 20px; padding: 20px; min-height: 120px; }
    .label-bold { font-weight: 900; font-size: 20px; display: block; margin-bottom: 10px; }
    .interactive-row { display: flex; align-items: center; gap: 15px; }
    .qty-control { display: flex; border: 2px solid #000; border-radius: 5px; overflow: hidden; }
    .qty-btn { background: #fff; border: none; padding: 5px 15px; font-size: 20px; font-weight: 900; cursor: pointer; }
    .qty-val { width: 50px; text-align: center; line-height: 40px; font-weight: 900; border-left: 2px solid #000; border-right: 2px solid #000; }
    .display-actions { display: flex; gap: 15px; }
    .btn-action { flex: 1; padding: 15px; border-radius: 12px; font-weight: 900; font-size: 18px; border: none; cursor: pointer; }
    .btn-cart-style { background: #fde68a; border: 1.2px solid #888; }
    .btn-buy-style { background: #f0cc85; }
    .back-nav { cursor: pointer; font-weight: 900; margin-bottom: 15px; display: inline-block; font-size: 18px; }

    #orders-page { display: none; padding: 100px 5% 40px; }
    .order-item { display: flex; align-items: center; border: 1.5px solid #ccc; border-radius: 15px; padding: 15px; margin-bottom: 15px; position: relative; }
    .order-item img { width: 70px; height: 70px; border-radius: 10px; object-fit: cover; margin-right: 15px; }
    .order-status { position: absolute; top: 15px; right: 15px; font-weight: 900; font-size: 14px; }
    .order-cancel-btn { position: absolute; bottom: 15px; right: 15px; color: red; font-weight: 900; cursor: pointer; border:none; background:none;}

    #addresses-page { display: none; padding: 100px 5% 40px; }
    .address-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 20px; margin-top: 20px; }
    .address-card { border: 3px solid #000; border-radius: 20px; padding: 20px; position: relative; background: #fff; }
    .address-card h3 { margin: 0 0 10px; display: flex; align-items: center; gap: 10px; font-size: 20px; font-weight: 900; }
    .tag-default { background: #000; color: #fff; font-size: 11px; padding: 4px 10px; border-radius: 20px; display: flex; align-items: center; gap: 5px; }
    .address-text { font-size: 14px; line-height: 1.6; margin-bottom: 15px; font-weight: 600; }
    .contact-line { border-top: 2px solid #000; padding-top: 10px; font-weight: 900; }

    .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 4000; display: none; justify-content: center; align-items: center; }
    .address-modal { background: #fff; width: 95%; max-width: 700px; border-radius: 25px; padding: 30px; position: relative; max-height: 90vh; overflow-y: auto; border: 2px solid #000; }
    .modal-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
    .form-group { display: flex; flex-direction: column; gap: 5px; }
    .form-group label { font-weight: 900; font-size: 13px; }
    .form-group input { padding: 12px; border-radius: 12px; border: 1.5px solid #eee; background: #f9f9f9; font-weight: 600; }
    .btn-add-address { border: 1.5px solid #ccc; border-radius: 12px; padding: 10px 20px; font-weight: 900; cursor: pointer; background: #fff; display: flex; align-items: center; gap: 8px; }

    #settings-page, #help-center-page { display: none; padding: 100px 5% 40px; }
    .settings-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 20px; margin-top: 20px; }
    .settings-card { border: 3px solid #000; border-radius: 20px; background: #fff; overflow: hidden; }
    .settings-header { display: flex; align-items: center; gap: 15px; padding: 15px 20px; border-bottom: 2px solid #000; }
    .settings-header h3 { margin: 0; font-size: 18px; font-weight: 900; }
    .settings-body { padding: 20px; }
    .settings-field { margin-bottom: 15px; }
    .settings-field label { display: block; font-weight: 900; margin-bottom: 8px; font-size: 14px; }
    .settings-field input, .settings-field textarea { width: 100%; padding: 12px; border-radius: 10px; border: 1.5px solid #eee; background: #f9f9f9; font-weight: 600; font-family: inherit; }
    .btn-save-settings { border: 1.5px solid #ccc; border-radius: 15px; padding: 8px 25px; font-weight: 900; cursor: pointer; background: #fff; float: right; margin-top: 10px; }
    .help-box { border: 3px solid #000; border-radius: 20px; padding: 25px; background: #fff; }
    .help-header { display: flex; align-items: center; gap: 15px; border-bottom: 2px solid #eee; padding-bottom: 15px; margin-bottom: 20px; }
  </style>
</head>
<body id="home-top">

<nav class="navbar">
  <div class="logo" onclick="closeDisplay()" style="cursor: pointer;">
    <span style="font-family: 'Poppins', cursive; font-size: 28px; color: #000; font-weight: 900;">Trestevoyce</span>
  </div>

  <ul class="nav-links">
    <li><a href="#home-top" onclick="closeDisplay()">Home</a></li>
    <li><a href="#shop-all" onclick="closeDisplay()">Shop</a></li>
    <li><a href="#new-arrivals" onclick="closeDisplay()">New Arrivals</a></li>
    <li><a href="#flash-deals" onclick="closeDisplay()">Sale</a></li>
  </ul>

<div class="search-box">
  <input type="text" id="search-input" placeholder="Search brands, products...">
  <i class="fa fa-search" style="cursor: pointer;" onclick="triggerSearch()"></i>
</div>
    <div class="nav-icons">
      <div class="icon-wrapper" onclick="toggleSidebar('wishlist-sidebar')">
        <i class="fa-regular fa-heart"></i>
        <span class="badge" id="wish-badge">0</span>
      </div>
      <div class="icon-wrapper" onclick="toggleSidebar('cart-sidebar')">
        <i class="fa-solid fa-cart-shopping"></i>
        <span class="badge" id="cart-badge">0</span>
      </div>
      <div class="icon-wrapper" onclick="toggleSidebar('profile-sidebar')">
        <i class="fa-regular fa-circle-user"></i>
      </div>
    </div>
  </nav>

  <div class="sidebar-overlay" id="overlay" onclick="closeAllSidebars()"></div>

  <div class="sidebar" id="profile-sidebar">
    <div class="sidebar-header">
      <div class="user-info">
        <i class="fa-solid fa-circle-user"></i>
        <div class="user-details">
          <h3>Customer Profile</h3>
          <p>sample@gmail.com</p>
        </div>
      </div>
      <i class="fa-solid fa-xmark" style="cursor:pointer; font-size:24px;" onclick="closeAllSidebars()"></i>
    </div>
    <div class="menu-group">
      <h4>Accounts</h4>
      <div class="menu-item" onclick="openOrdersPage()"><div><i class="fa-solid fa-box-open"></i> My Orders</div> <i class="fa-solid fa-chevron-right"></i></div>
      <div class="menu-item" onclick="openAddressPage()"><div><i class="fa-solid fa-location-dot"></i> Address</div> <i class="fa-solid fa-chevron-right"></i></div>
      <div class="menu-item"><div><i class="fa-solid fa-wallet"></i> Payment methods</div> <i class="fa-solid fa-chevron-right"></i></div>
    </div>
    <div class="menu-group">
      <h4>Preferences</h4>
      <div class="menu-item" onclick="openSettingsPage()"><div><i class="fa-solid fa-gear"></i> Settings</div> <i class="fa-solid fa-chevron-right"></i></div>
      <div class="menu-item" onclick="openHelpCenterPage()"><div><i class="fa-solid fa-headset"></i> Help Center</div> <i class="fa-solid fa-chevron-right"></i></div>
    </div>
    <button class="btn-logout">Log out</button>
  </div>

  <div class="sidebar" id="wishlist-sidebar">
    <div class="sidebar-header">
      <h2><i class="fa-regular fa-heart"></i> Wishlist (<span id="wish-count-header">0</span>)</h2>
      <i class="fa-solid fa-xmark" style="cursor:pointer; font-size:24px;" onclick="closeAllSidebars()"></i>
    </div>
    <div id="wishlist-list" style="overflow-y:auto; flex:1;"></div>
  </div>

  <div class="sidebar" id="cart-sidebar">
    <div class="sidebar-header">
      <h2><i class="fa-solid fa-cart-shopping"></i> Shopping Cart</h2>
      <i class="fa-solid fa-xmark" style="cursor:pointer; font-size:24px;" onclick="closeAllSidebars()"></i>
    </div>
    <div id="cart-list" style="overflow-y:auto; flex:1;"></div>
    <div style="border-top:2px solid #eee; padding-top:15px; margin-top:10px;">
        <h3 style="display:flex; justify-content:space-between;">Total: <span id="cart-total">â‚±0.00</span></h3>
        <button class="btn-action btn-buy-style" style="width:100%" onclick="checkoutCart()">Checkout</button>
    </div>
  </div>

  <div id="home-wrapper">
    <header class="hero">
      <div class="hero-content">
        <h1>Find it, Love it, <br> Buy it</h1>
        <button class="btn-shop-now" onclick="location.href='#shop-all'">Shop Now</button>
      </div>
    </header>

    <main class="main-container">
      <div class="page-title" id="shop-all"> <h2>Shop All Products</h2>
        <p>Discover our curated collection of premium products</p>
      </div>

      <div class="category-filters">
        <button class="filter-btn active" data-category="all">All</button>
        <button class="filter-btn" data-category="clothing"><i class="fa-solid fa-shirt"></i> Clothing <small>2</small></button>
        <button class="filter-btn" data-category="shoes"><i class="fa-solid fa-shoe-prints"></i> Shoes <small>1</small></button>
        <button class="filter-btn" data-category="bags"><i class="fa-solid fa-bag-shopping"></i> Bags <small>1</small></button>
        <button class="filter-btn" data-category="watches"><i class="fa-solid fa-clock"></i> Watches <small>1</small></button>
      </div>

      <div class="section-box" id="new-arrivals"> <div class="section-title-row">
          <h3>New Arrivals</h3>
           <a href="#" class="see-all">See all <i class="fa-solid fa-chevron-right"></i></a>
        </div>
        <div id="new-arrivals-grid" class="product-grid"></div>
      </div>

      <div class="section-box" id="flash-deals"> <div class="section-title-row">
          <h3>Flash Deals</h3>

        </div>
        <div id="flash-deals-grid" class="product-grid"></div>
      </div>
    </main>

    <footer>
      <div class="footer-grid">
        <div>
          <h2 style="font-family: 'Cedarville Cursive', cursive; color: var(--gold); font-size: 32px; margin: 0 0 15px;">Trestevoyce</h2>
          <p style="font-size: 14px; color: #ccc;">Curated premium fashion and lifestyle essentials. Quality meets style.</p>
          <div style="display: flex; gap: 15px; margin-top: 20px;">
            <a href="#" style="color: #fff; font-size: 20px;"><i class="fa-brands fa-facebook"></i></a>
            <a href="#" style="color: #fff; font-size: 20px;"><i class="fa-brands fa-instagram"></i></a>
            <a href="#" style="color: #fff; font-size: 20px;"><i class="fa-brands fa-tiktok"></i></a>
          </div>
        </div>
        <div>
          <h4 style="font-weight: 900; margin-bottom: 20px; text-transform: uppercase;">Shop</h4>
          <ul class="footer-links">
            <li><a href="#new-arrivals">New Arrivals</a></li>
            <li><a href="#"  onclick="openHelpCenterPage()">Contact us</a></li>
            <li><a href="#flash-deals">Flash Sale</a></li>
          </ul>
        </div>
        <div>
          <h4 style="font-weight: 900; margin-bottom: 20px; text-transform: uppercase;">Support</h4>
          <ul class="footer-links">
            <li><a href="#" onclick="openHelpCenterPage()">Help Center</a></li>
            <li><a href="#">Shipping & Returns</a></li>
            <li><a href="#"onclick="openOrdersPage()">Track Order</a></li>
          </ul>
        </div>
        <div>
          <h4 style="font-weight: 900; margin-bottom: 20px; text-transform: uppercase;">Stay Updated</h4>
          <div class="newsletter-box">
            <input type="email" placeholder="Email address">
            <button>JOIN</button>
          </div>
        </div>
      </div>
      <div style="padding-top: 25px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">
        <p style="font-size: 12px; color: #666;">&copy; 2025 Trestevoyce. All rights reserved.</p>
        <div style="display: flex; gap: 15px; font-size: 24px; color: #444;">
          <i class="fa-brands fa-cc-visa"></i>
          <i class="fa-brands fa-cc-mastercard"></i>
          <i class="fa-brands fa-cc-paypal"></i>
        </div>
      </div>
    </footer>
  </div>

  <button id="backToTop" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
    <i class="fa-solid fa-arrow-up"></i>
  </button>

  <section id="product-display-section">
    <div class="back-nav" onclick="closeDisplay()"><i class="fa fa-chevron-left"></i> Back to Shop</div>
    <div class="display-container">
      <div class="display-gallery">
        <div class="display-main-img">
          <img id="view-img" src="" alt="View Product">
        </div>
      </div>
      <div class="display-details">
        <h1 id="view-title" style="margin:0; font-weight:900;">Product Title</h1>
        <div class="display-price"><span>â‚±</span> <span id="view-price">0.00</span></div>
        <div class="display-desc">
          <span class="label-bold">Description</span>
          <p id="view-desc">Premium quality product designed for comfort and style.</p>
        </div>

        <div class="interactive-row">
          <span class="label-bold" style="margin:0">Quantity:</span>
          <div class="qty-control">
            <button class="qty-btn" onclick="setQty(-1)">-</button>
            <div class="qty-val" id="view-qty">1</div>
            <button class="qty-btn" onclick="setQty(1)">+</button>
          </div>
        </div>

        <div class="display-actions">
          <button class="btn-action btn-cart-style" onclick="addToCartFromDetail()">Add to Cart</button>
          <button class="btn-action btn-buy-style" onclick="checkoutSingle()">Buy Now</button>
        </div>
      </div>
    </div>
  </section>

  <section id="orders-page">
    <div class="back-nav" onclick="closeDisplay()"><i class="fa fa-chevron-left"></i> Back to Shop</div>
    <div style="border: 1.5px solid #ccc; border-radius: 20px; padding: 25px;">
        <h2 style="font-weight:900; margin-top:0;">My Orders</h2>
        <div id="orders-list-content"></div>
    </div>
  </section>

  <section id="addresses-page">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
        <div class="back-nav" onclick="closeDisplay()"><i class="fa fa-chevron-left"></i> Back to Shop</div>
        <button class="btn-add-address" onclick="toggleAddressModal(true)"><i class="fa-plus"></i> Add Address</button>
    </div>
    <div style="border: 1.5px solid #ccc; border-radius: 20px; padding: 25px;">
        <h2 style="font-weight:900; margin-top:0;">My Addresses</h2>
        <div id="address-grid-list" class="address-grid"></div>
    </div>
  </section>

  <section id="settings-page">
    <div class="back-nav" onclick="closeDisplay()"><i class="fa fa-chevron-left"></i> Back to Shop</div>
    <h2 style="font-weight:900; margin-top:0;">Settings</h2>
    <div class="settings-grid">
        <div class="settings-card">
            <div class="settings-header">
                <i class="fa-solid fa-circle-user" style="font-size: 24px; color: #94a3b8;"></i>
                <h3>Profile Information</h3>
            </div>
            <div class="settings-body">
                <div class="settings-field"><label>Name</label><input type="text" value="Steven Chismoso"></div>
                <div class="settings-field"><label>Email Address</label><input type="email" value="sample@gmail.com"></div>
                <div class="settings-field"><label>Phone Number</label><input type="text" value="0963 xxx xxxx"></div>
                <button class="btn-save-settings">Save Changes</button>
            </div>
        </div>
        <div class="settings-card">
            <div class="settings-header">
                <i class="fa-solid fa-shield-halved" style="font-size: 20px;"></i>
                <h3>Security</h3>
            </div>
            <div class="settings-body">
                <div class="settings-field"><label>Current Password</label><input type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"></div>
                <div class="settings-field"><label>New Password</label><input type="password"></div>
                <div class="settings-field"><label>Confirm Password</label><input type="password"></div>
                <button class="btn-save-settings">Save Changes</button>
            </div>
        </div>
    </div>
  </section>

<section id="help-center-page">
    <div class="back-nav" onclick="closeDisplay()"><i class="fa fa-chevron-left"></i> Back to Shop</div>
    <h2 style="font-weight:900; margin-top:0;">Help Center</h2>
    <div class="help-box">
        <div class="help-header">
            <i class="fa-solid fa-headset" style="font-size: 28px;"></i>
            <h3 style="margin: 0; font-weight: 900;">Contact Us</h3>
        </div>
        
        <div class="settings-field">
            <label>Subject</label>
            <input type="text" id="help-subject" placeholder="e.g., Order Inquiry, Delivery Issue">
        </div>
        <div class="settings-field">
            <label>Message</label>
            <textarea id="help-message" rows="8" placeholder="Describe your issue in detail..."></textarea>
        </div>
        
        <div style="text-align: center;">
            <button id="help-submit-btn" class="btn-save-settings" 
                    style="float:none; border: 2px solid #000; padding: 10px 40px;" 
                    onclick="submitHelpRequest()">
                Send your message
            </button>
        </div>
    </div>
</section>

  <div class="modal-overlay" id="address-modal-ui">
    <div class="address-modal">
        <i class="fa fa-xmark" style="position:absolute; top:20px; right:20px; font-size:24px; cursor:pointer;" onclick="toggleAddressModal(false)"></i>
        <h2 style="text-align:center; font-weight:900; margin-top:0;">Add new Addresses</h2>
        <p style="text-align:center; color:#666; font-size:13px; margin-bottom:25px;">Fill in the details for your new address</p>
        
        <form id="address-form-element" onsubmit="saveNewAddress(event)">
            <div class="modal-grid">
                <div class="form-group"><label>Address Type</label><input type="text" id="in-type" placeholder="Home / Work" required></div>
                <div class="form-group"><label>Label</label><input type="text" id="in-label" placeholder="e.g. My Apartment"></div>
                <div class="form-group"><label>First Name *</label><input type="text" id="in-fname" required></div>
                <div class="form-group"><label>Last Name *</label><input type="text" id="in-lname" required></div>
                <div class="form-group"><label>Region *</label><input type="text" id="in-region" required></div>
                <div class="form-group"><label>Province *</label><input type="text" id="in-prov" required></div>
                <div class="form-group"><label>Municipality *</label><input type="text" id="in-muni" required></div>
                <div class="form-group"><label>Barangay *</label><input type="text" id="in-brgy" required></div>
                <div class="form-group"><label>Street/ Purok *</label><input type="text" id="in-street" required></div>
                <div class="form-group"><label>Contact Number *</label><input type="text" id="in-phone" placeholder="0963 xxx xxxx" required></div>
            </div>
            <div style="text-align:center; margin-top:30px;">
                <button type="submit" class="btn-action btn-buy-style" style="width:100%; max-width:250px;">Add Address</button>
            </div>
        </form>
    </div>
  </div>



  <script>
    /* the javascript */
    const products = [
      { id: 1, name: "Summer Floral Set", price: 590.00, category: "clothing", img: "https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=500", flash: true, progress: 75, desc: "A vibrant, breathable floral set perfect for tropical weather and summer outings." },
      { id: 2, name: "Premium Leather Bag", price: 850.00, category: "bags", img: "https://images.unsplash.com/photo-1584917865442-de89df76afd3?w=500", flash: true, progress: 40, desc: "Elegant handcrafted leather bag with premium stitching and plenty of space." },
      { id: 3, name: "Gold Classic Watch", price: 1250.00, category: "watches", img: "https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=500", flash: true, progress: 90, desc: "Timeless gold-plated watch with water resistance and luxury sapphire glass." },
      { id: 4, name: "Urban Sneakers", price: 950.00, category: "shoes", img: "https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=500", flash: false, desc: "Lightweight urban sneakers built for daily comfort and high performance." },
      { id: 5, name: "Denim Jacket", price: 720.00, category: "clothing", img: "https://images.unsplash.com/photo-1551537482-f2075a1d41f2?w=500", flash: false, desc: "Rugged denim jacket with a classic vintage wash and comfortable fit." }
    ];

    let cart = [];
    let wishlist = [];
    let myOrders = [];
    let myAddresses = [
        { type: 'Home', fname: 'Joyce', lname: 'A.', street: '123 Main Street', brgy: 'Parag-um', muni: 'Carigara', prov: 'Leyte', phone: '0963 xxx xxxx', isDefault: true }
    ];
    let currentViewingId = null;
    let q = 1;

    function renderGrids(filter = "all") {
      const arrivalsGrid = document.getElementById('new-arrivals-grid');
      const flashGrid = document.getElementById('flash-deals-grid');
      arrivalsGrid.innerHTML = ""; flashGrid.innerHTML = "";

      products.forEach(p => {
        if (filter !== "all" && p.category !== filter) return;
        
        const isFav = wishlist.some(item => item.id === p.id);
        const card = `
          <div class="product-card" onclick="openDisplay(${p.id})">
            <div class="img-wrapper">
              <img src="${p.img}" alt="${p.name}">
              <div class="heart-btn" style="background: ${isFav ? '#ff3b3b' : '#888'}" onclick="event.stopPropagation(); toggleWish(${p.id})">
                <i class="${isFav ? 'fa-solid' : 'fa-regular'} fa-heart"></i>
              </div>
            </div>
            <div class="info">
              <h4>${p.name}</h4>
              <div class="price-row">
                <span class="price">â‚±${p.price.toFixed(2)}</span>
                <button class="add-btn" onclick="event.stopPropagation(); addToCart(${p.id}, 1)">Add to Cart</button>
              </div>
              ${p.flash ? `<div class="selling-fast"><div class="progress" style="width: ${p.progress}%;"></div><span>ðŸ”¥ SELLING FAST</span></div>` : ''}
            </div>
          </div>`;
        if (p.flash) flashGrid.innerHTML += card;
        else arrivalsGrid.innerHTML += card;
      });
    }

    function toggleSidebar(id) {
      document.getElementById('overlay').style.display = 'block';
      document.getElementById(id).classList.add('active');
    }

    function closeAllSidebars() {
      document.getElementById('overlay').style.display = 'none';
      document.querySelectorAll('.sidebar').forEach(s => s.classList.remove('active'));
    }

    function addToCart(id, qty) {
      const p = products.find(prod => prod.id === id);
      const existing = cart.find(item => item.id === id);
      if(existing) existing.qty += qty;
      else cart.push({...p, qty});
      updateUI();
    }

    function addToCartFromDetail() { addToCart(currentViewingId, q); }

    function checkoutCart() {
        if(cart.length === 0) return alert("Cart is empty!");
        cart.forEach(item => {
            myOrders.unshift({
                orderNo: Math.floor(Math.random() * 900 + 100).toString(),
                name: item.name,
                price: item.price * item.qty,
                img: item.img,
                status: "processing"
            });
        });
        cart = [];
        updateUI();
        alert("Order placed successfully!");
        openOrdersPage();
    }

    function checkoutSingle() {
        const p = products.find(prod => prod.id === currentViewingId);
        myOrders.unshift({ orderNo: "001", name: p.name, price: p.price * q, img: p.img, status: "processing" });
        alert("Order placed successfully!");
        openOrdersPage();
    }

    function openOrdersPage() {
        closeAllSidebars();
        hideAllPages();
        document.getElementById('orders-page').style.display = "block";
        renderOrdersUI();
    }

    function openAddressPage() {
        closeAllSidebars();
        hideAllPages();
        document.getElementById('addresses-page').style.display = "block";
        renderAddressesUI();
    }

    function openSettingsPage() {
        closeAllSidebars();
        hideAllPages();
        document.getElementById('settings-page').style.display = "block";
    }

    function openHelpCenterPage() {
        closeAllSidebars();
        hideAllPages();
        document.getElementById('help-center-page').style.display = "block";
    }

    function hideAllPages() {
        document.getElementById('home-wrapper').style.display = "none";
        document.getElementById('product-display-section').style.display = "none";
        document.getElementById('orders-page').style.display = "none";
        document.getElementById('addresses-page').style.display = "none";
        document.getElementById('settings-page').style.display = "none";
        document.getElementById('help-center-page').style.display = "none";
    }

    function closeDisplay() {
        hideAllPages();
        document.getElementById('home-wrapper').style.display = "block";
    }

// Function to display orders with their status
function renderOrdersUI() {
    const list = document.getElementById('orders-list-content');
    if (myOrders.length === 0) {
        list.innerHTML = "<p style='text-align:center; padding: 20px;'>No orders yet.</p>";
        return;
    }

    list.innerHTML = myOrders.map(order => {
        // Determine the style class and icon based on status
        let statusClass = `status-${order.status.toLowerCase()}`;
        let icon = order.status === 'processing' ? 'fa-spinner fa-spin' : 
                   order.status === 'shipped' ? 'fa-truck-fast' : 'fa-circle-check';

        return `
            <div class="order-item" style="flex-direction: column; align-items: flex-start; gap: 10px;">
                <div style="display: flex; width: 100%; align-items: center;">
                    <img src="${order.img}">
                    <div style="flex: 1;">
                        <h4 style="margin:0; font-size: 15px;">Order No. ${order.orderNo}</h4>
                        <p style="margin:5px 0; font-weight:900;">â‚±${order.price.toFixed(2)}</p>
                    </div>
                    <span class="status-tag ${statusClass}">
                        <i class="fa-solid ${icon}"></i> ${order.status}
                    </span>
                </div>
                ${order.status === 'processing' ? 
                    `<button class="order-cancel-btn" onclick="cancelOrder('${order.orderNo}')">Cancel Order</button>` : ''}
            </div>
        `;
    }).join('');
}

// Update Checkout to include status
function checkoutCart() {
    const itemsToBuy = cart.filter(item => selectedItems.has(item.id));
    if (itemsToBuy.length === 0) {
        alert("Please select items to checkout.");
        return;
    }
    
    itemsToBuy.forEach(item => {
        myOrders.unshift({
            orderNo: Math.floor(Math.random() * 9000 + 1000).toString(),
            name: item.name,
            price: item.price * item.qty,
            img: item.img,
            status: "processing" // New orders start here
        });
    });

    cart = cart.filter(item => !selectedItems.has(item.id));
    selectedItems.clear();
    updateUI();
    openOrdersPage(); // Automatically show the status page
}

function checkoutSingle() {
    const qty = parseInt(document.getElementById('view-qty').innerText);
    myOrders.unshift({
        orderNo: Math.floor(Math.random() * 9000 + 1000).toString(),
        name: currentViewProduct.name,
        price: currentViewProduct.price * qty,
        img: currentViewProduct.img,
        status: "processing"
    });
    updateUI();
    openOrdersPage();
}

    function cancelOrder(no) {
        if(confirm("Are you sure you want to cancel this order?")) {
            myOrders = myOrders.filter(o => o.orderNo !== no);
            renderOrdersUI();
        }
    }

    function toggleAddressModal(show) {
        document.getElementById('address-modal-ui').style.display = show ? 'flex' : 'none';
    }

    function saveNewAddress(e) {
        e.preventDefault();
        const newAddr = {
            type: document.getElementById('in-type').value,
            fname: document.getElementById('in-fname').value,
            lname: document.getElementById('in-lname').value,
            street: document.getElementById('in-street').value,
            brgy: document.getElementById('in-brgy').value,
            muni: document.getElementById('in-muni').value,
            prov: document.getElementById('in-prov').value,
            phone: document.getElementById('in-phone').value,
            isDefault: false
        };
        myAddresses.push(newAddr);
        toggleAddressModal(false);
        renderAddressesUI();
        document.getElementById('address-form-element').reset();
    }

function renderAddressesUI() {
    const grid = document.getElementById('address-grid-list');
    grid.innerHTML = myAddresses.map((addr, index) => `
        <div class="address-card" style="${addr.isDefault ? 'border: 2px solid var(--gold);' : ''}">
            <div style="display:flex; justify-content:space-between; align-items:start;">
                <h3><i class="fa-solid ${addr.type.toLowerCase() === 'home' ? 'fa-house' : 'fa-briefcase'}"></i> ${addr.type}</h3>
                
                <div style="display: flex; gap: 12px; align-items: center;">
                    <button onclick="confirmDeleteAddress(${index})" style="background:none; border:none; color:#ff3b3b; cursor:pointer; font-size:18px;">
                        <i class="fa-regular fa-trash-can"></i>
                    </button>
                </div>
            </div>

            <div class="address-text">
                <strong style="font-size:18px;">${addr.fname} ${addr.lname}</strong><br>
                ${addr.street}<br>${addr.brgy}, ${addr.muni}<br>${addr.prov}, Philippines
            </div>
            
            <div class="contact-line" style="margin-bottom: 15px;">${addr.phone}</div>

            <div style="margin-top: auto;">
                ${addr.isDefault ? 
                    '<span class="tag-default" style="background:var(--gold); padding:5px 12px; border-radius:5px; font-weight:900; font-size:12px;"><i class="fa-solid fa-star"></i> DEFAULT ADDRESS</span>' : 
                    `<button class="btn-wish-cart" onclick="setDefaultAddress(${index})" style="width:100%; font-size:12px; padding:8px;">SET AS DEFAULT</button>`
                }
            </div>
        </div>
    `).join('');
}


    function toggleWish(id) {
      const p = products.find(prod => prod.id === id);
      const idx = wishlist.findIndex(item => item.id === id);
      if(idx > -1) wishlist.splice(idx, 1);
      else wishlist.push(p);
      updateUI();
      renderGrids();
    }

// NEW: Track selected items for checkout
let selectedItems = new Set();

function updateUI() {
    document.getElementById('wish-badge').innerText = wishlist.length;
    document.getElementById('wish-count-header').innerText = wishlist.length;
    document.getElementById('cart-badge').innerText = cart.reduce((acc, curr) => acc + curr.qty, 0);

    // Render Wishlist
    const wishListEl = document.getElementById('wishlist-list');
    wishListEl.innerHTML = wishlist.map(p => `
        <div class="wish-card">
          <img src="${p.img}">
          <div class="wish-info">
            <span>${p.category}</span>
            <h4>${p.name}</h4>
            <div class="price">â‚±${p.price.toFixed(2)}</div>
            <div class="wish-actions">
                <button class="btn-wish-cart" onclick="addToCart(${p.id}, 1)"><i class="fa-solid fa-cart-shopping"></i> Add to Cart</button>
                <button class="btn-delete" onclick="toggleWish(${p.id})"><i class="fa-regular fa-trash-can"></i></button>
            </div>
          </div>
        </div>`).join('');

    // RENDER CART WITH SELECTORS & DELETE
    const cartListEl = document.getElementById('cart-list');
    let checkoutTotal = 0;

    cartListEl.innerHTML = cart.map(p => {
        const isSelected = selectedItems.has(p.id);
        if (isSelected) checkoutTotal += p.price * p.qty;

        return `
          <div class="wish-card" style="align-items: center; gap: 10px;">
            <input type="checkbox" ${isSelected ? 'checked' : ''} 
                   onchange="toggleSelect(${p.id})" 
                   style="width: 18px; height: 18px; cursor: pointer;">
            
            <img src="${p.img}" style="width: 60px; height: 60px;">
            
            <div class="wish-info">
              <h4 style="font-size: 14px; margin: 0;">${p.name}</h4>
              <div class="price" style="font-size: 14px;">â‚±${(p.price * p.qty).toFixed(2)}</div>
              
              <div class="wish-actions" style="justify-content: space-between; margin-top: 5px;">
                <div class="qty-control" style="transform: scale(0.7); margin-left: -20px;">
                  <button class="qty-btn" onclick="changeCartQty(${p.id}, -1)">-</button>
                  <div class="qty-val">${p.qty}</div>
                  <button class="qty-btn" onclick="changeCartQty(${p.id}, 1)">+</button>
                </div>
                
                <button class="btn-delete" onclick="removeFromCart(${p.id})" style="color: #ff3b3b;">
                  <i class="fa-regular fa-trash-can"></i>
                </button>
              </div>
            </div>
          </div>`;
    }).join('');

    document.getElementById('cart-total').innerText = `â‚±${checkoutTotal.toFixed(2)}`;
}

// NEW: Selection and Quantity Handlers
function toggleSelect(id) {
    if (selectedItems.has(id)) selectedItems.delete(id);
    else selectedItems.add(id);
    updateUI();
}

function changeCartQty(id, delta) {
    const item = cart.find(p => p.id === id);
    if (item) {
        item.qty += delta;
        if (item.qty <= 0) removeFromCart(id);
        else updateUI();
    }
}

function removeFromCart(id) {
    cart = cart.filter(p => p.id !== id);
    selectedItems.delete(id);
    updateUI();
}

// UPDATE: Checkout only selected items
function checkoutCart() {
    const itemsToBuy = cart.filter(item => selectedItems.has(item.id));
    if (itemsToBuy.length === 0) return alert("Please select items to checkout!");
    
    itemsToBuy.forEach(item => {
        myOrders.unshift({
            orderNo: Math.floor(Math.random() * 900 + 100).toString(),
            name: item.name,
            price: item.price * item.qty,
            img: item.img,
            status: "processing"
        });
    });

    // Remove only the items that were bought
    cart = cart.filter(item => !selectedItems.has(item.id));
    selectedItems.clear();
    
    updateUI();
    alert("Order placed for selected items!");
    openOrdersPage();
}

    function openDisplay(id) {
      const p = products.find(item => item.id === id);
      currentViewingId = id;
      hideAllPages();
      document.getElementById('product-display-section').style.display = "block";
      document.getElementById('view-img').src = p.img;
      document.getElementById('view-title').innerText = p.name;
      document.getElementById('view-price').innerText = p.price.toFixed(2);
      document.getElementById('view-desc').innerText = p.desc;
      q = 1;
      document.getElementById('view-qty').innerText = q;
      window.scrollTo(0, 0);
    }

    function setQty(n) {
      q = Math.max(1, q + n);
      document.getElementById('view-qty').innerText = q;
    }

    document.querySelectorAll('.filter-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        renderGrids(btn.getAttribute('data-category'));
      });
    });

    /* --- MISSING SCROLL LOGIC --- */
    window.onscroll = function() {
      const btn = document.getElementById("backToTop");
      if (document.body.scrollTop > 400 || document.documentElement.scrollTop > 400) {
        btn.style.display = "flex";
      } else {
        btn.style.display = "none";
      }
    };

    // --- SEARCH FUNCTIONALITY ---
document.getElementById('search-input').addEventListener('input', function(e) {
    const searchTerm = e.target.value.toLowerCase();
    
    // Filter the original products array
    const filteredProducts = products.filter(p => 
        p.name.toLowerCase().includes(searchTerm) || 
        p.category.toLowerCase().includes(searchTerm)
    );

    // Call a modified render function or update the grids manually
    renderFilteredResults(filteredProducts);
});

function renderFilteredResults(filteredList) {
    const arrivalsGrid = document.getElementById('new-arrivals-grid');
    const flashGrid = document.getElementById('flash-deals-grid');
    
    // Clear existing items
    arrivalsGrid.innerHTML = ""; 
    flashGrid.innerHTML = "";

    if (filteredList.length === 0) {
        arrivalsGrid.innerHTML = "<p style='grid-column: 1/-1; text-align: center; padding: 20px;'>No products found matching your search.</p>";
        return;
    }

    filteredList.forEach(p => {
        const isFav = wishlist.some(item => item.id === p.id);
        const card = `
          <div class="product-card" onclick="openDisplay(${p.id})">
            <div class="img-wrapper">
              <img src="${p.img}" alt="${p.name}">
              <div class="heart-btn" style="background: ${isFav ? '#ff3b3b' : '#888'}" onclick="event.stopPropagation(); toggleWish(${p.id})">
                <i class="${isFav ? 'fa-solid' : 'fa-regular'} fa-heart"></i>
              </div>
            </div>
            <div class="info">
              <h4>${p.name}</h4>
              <div class="price-row">
                <span class="price">â‚±${p.price.toFixed(2)}</span>
                <button class="add-btn" onclick="event.stopPropagation(); addToCart(${p.id}, 1)">Add to Cart</button>
              </div>
            </div>
          </div>`;
        
        if (p.flash) flashGrid.innerHTML += card;
        else arrivalsGrid.innerHTML += card;
    });
}

// Add this inside your <script> tag
document.querySelectorAll('.nav-links a').forEach(link => {
    link.addEventListener('click', function() {
        // Remove 'active' class from all links
        document.querySelectorAll('.nav-links a').forEach(nav => nav.classList.remove('active'));
        
        // Add 'active' class to the clicked link
        this.classList.add('active');
    });
});

// Function to trigger search when the icon is clicked
function triggerSearch() {
    const input = document.getElementById('search-input');
    executeSearch(input.value);
}

// Optional: Allow the "Enter" key to also trigger the search
document.getElementById('search-input').addEventListener('keypress', function (e) {
    if (e.key === 'Enter') {
        executeSearch(this.value);
    }
});

// The core logic to filter and display products
function executeSearch(query) {
    const searchTerm = query.toLowerCase().trim();
    
    const filteredProducts = products.filter(p => 
        p.name.toLowerCase().includes(searchTerm) || 
        p.category.toLowerCase().includes(searchTerm)
    );

    const arrivalsGrid = document.getElementById('new-arrivals-grid');
    const flashGrid = document.getElementById('flash-deals-grid');
    
    arrivalsGrid.innerHTML = ""; 
    flashGrid.innerHTML = "";

    if (filteredProducts.length === 0) {
        arrivalsGrid.innerHTML = "<p style='grid-column: 1/-1; text-align: center; padding: 40px;'>No products found.</p>";
        return;
    }

    filteredProducts.forEach(p => {
        const isFav = wishlist.some(item => item.id === p.id);
        const card = `
          <div class="product-card" onclick="openDisplay(${p.id})">
            <div class="img-wrapper">
              <img src="${p.img}" alt="${p.name}">
              <div class="heart-btn" style="background: ${isFav ? '#ff3b3b' : '#888'}" onclick="event.stopPropagation(); toggleWish(${p.id})">
                <i class="${isFav ? 'fa-solid' : 'fa-regular'} fa-heart"></i>
              </div>
            </div>
            <div class="info">
              <h4>${p.name}</h4>
              <div class="price-row">
                <span class="price">â‚±${p.price.toFixed(2)}</span>
                <button class="add-btn" onclick="event.stopPropagation(); addToCart(${p.id}, 1)">Add to Cart</button>
              </div>
              ${p.flash ? `<div class="selling-fast"><div class="progress" style="width: ${p.progress}%;"></div><span>ðŸ”¥ SELLING FAST</span></div>` : ''}
            </div>
          </div>`;
        
        if (p.flash) flashGrid.innerHTML += card;
        else arrivalsGrid.innerHTML += card;
    });

    // Automatically scroll down to the results
    document.getElementById('shop-all').scrollIntoView({ behavior: 'smooth' });
}

// sending message

function submitHelpRequest() {
    const subject = document.getElementById('help-subject').value;
    const message = document.getElementById('help-message').value;
    const btn = document.getElementById('help-submit-btn');

    // 1. Validation
    if (!subject.trim() || !message.trim()) {
        alert("Please provide both a subject and a message.");
        return;
    }

    // 2. Visual "Sending" State
    const originalText = btn.innerText;
    btn.innerText = "SENDING...";
    btn.disabled = true;

    // 3. Simulate Network Delay (1.5 seconds)
    setTimeout(() => {
        // 4. Success Feedback
        alert("Ticket sent! We will reply to your registered email shortly.");
        
        // 5. Reset Form and Button
        btn.innerText = originalText;
        btn.disabled = false;
        document.getElementById('help-subject').value = "";
        document.getElementById('help-message').value = "";
        
        // 6. Return to Shop (Optional)
        closeDisplay();
    }, 1500);
}


// Function for the main product grid
function addToCart(id, qty) {
    const product = products.find(p => p.id === id);
    const existingItem = cart.find(item => item.id === id);

    if (existingItem) {
        existingItem.qty += qty;
    } else {
        cart.push({ ...product, qty });
    }

    updateUI();
    showToast(`${product.name} added to cart!`); // Trigger the notification
}

/* --- FIXED BUTTON FUNCTIONS --- */

/* --- FIXED PRODUCT DETAIL BUTTONS --- */
function addToCartFromDetail() {
    // Finds the product matching the ID currently being viewed
    if (currentViewingId) {
        const qty = parseInt(document.getElementById('view-qty').innerText);
        addToCart(currentViewingId, qty); // Triggers the existing cart logic
    }
}

function checkoutSingle() {
    const p = products.find(prod => prod.id === currentViewingId);
    if (!p) return;

    const qty = parseInt(document.getElementById('view-qty').innerText);
    
    // Creates a new order object and adds it to the start of the list
    const newOrder = {
        orderNo: Math.floor(100000 + Math.random() * 900000).toString(),
        name: p.name,
        price: p.price * qty,
        img: p.img,
        status: "processing"
    };

    myOrders.unshift(newOrder); 
    showToast("Order placed successfully!");
    openOrdersPage(); // Redirects user to see their new order
}

/* --- FIXED ADDRESS FUNCTIONS --- */

function setDefaultAddress(index) {
    // 1. Set all addresses to not default
    myAddresses.forEach(addr => addr.isDefault = false);
    
    // 2. Set the selected one as default
    myAddresses[index].isDefault = true;
    
    // 3. Refresh the UI and show confirmation
    renderAddressesUI();
    showToast("Default address updated!");
}

function confirmDeleteAddress(index) {
    if (myAddresses[index].isDefault) {
        alert("You cannot delete your default address. Please set another one as default first.");
        return;
    }
    if (confirm("Are you sure you want to delete this address?")) {
        myAddresses.splice(index, 1);
        renderAddressesUI();
    }
}


// --- FUNCTIONAL ADDRESS LOGIC ---

function setDefaultAddress(index) {
    // 1. Loop through all addresses and remove 'isDefault'
    myAddresses.forEach(addr => addr.isDefault = false);
    
    // 2. Set the clicked address as the new default
    myAddresses[index].isDefault = true;
    
    // 3. Re-render the UI and notify user
    renderAddressesUI();
    showToast("Default address updated!");
}

function confirmDeleteAddress(index) {
    // Prevent deleting the default address for safety
    if (myAddresses[index].isDefault) {
        alert("You cannot delete your default address. Set another one as default first.");
        return;
    }
    
    if (confirm("Are you sure you want to delete this address?")) {
        myAddresses.splice(index, 1);
        renderAddressesUI();
        showToast("Address deleted.");
    }
}

// Updated renderer to ensure buttons call the functions above
function renderAddressesUI() {
    const grid = document.getElementById('address-grid-list');
    if (!grid) return;

    grid.innerHTML = myAddresses.map((addr, index) => `
        <div class="address-card" style="${addr.isDefault ? 'border: 2px solid var(--gold);' : 'border: 1.5px solid #eee;'}">
            <div style="display:flex; justify-content:space-between; align-items:start;">
                <span class="tag-category" style="background:#f0f0f0; padding:2px 8px; border-radius:4px; font-size:11px;">${addr.type}</span>
                ${addr.isDefault ? '<span class="tag-default" style="background:var(--gold); padding:2px 8px; border-radius:4px; font-size:10px; font-weight:900;">DEFAULT</span>' : ''}
            </div>
            <h3 style="margin:10px 0 5px 0;">${addr.fname} ${addr.lname}</h3>
            <p style="font-size:13px; color:#666; margin:0;">${addr.phone}</p>
            <p style="font-size:13px; color:#333; margin:5px 0;">${addr.street}, Brgy. ${addr.brgy}, ${addr.muni}, ${addr.prov}</p>
            
            <div style="margin-top:15px; display:flex; gap:10px;">
                ${!addr.isDefault ? `<button onclick="setDefaultAddress(${index})" style="flex:1; padding:8px; cursor:pointer; background:white; border:1.5px solid black; font-weight:bold;">Set Default</button>` : ''}
                <button onclick="confirmDeleteAddress(${index})" style="padding:8px; cursor:pointer; background:none; border:none; color:#ff4444;"><i class="fa-solid fa-trash"></i></button>
            </div>
        </div>
    `).join('');
}


// Ensure you have the showToast utility function
function showToast(message) {
    const toast = document.getElementById('message-toast');
    toast.querySelector('span').innerText = message;
    toast.classList.add('show');  
    
    setTimeout(() => {
        toast.classList.remove('show');
    }, 3000);
}
    renderGrids();
  </script>

  <div id="message-toast" class="toast-notification">
    <i class="fa-solid fa-circle-check"></i>
    <span>Action successful!</span>

  <div id="message-toast" class="toast-notification">
    <i class="fa-solid fa-circle-check"></i>
    <span>Action successful!</span>
</div>

</div>
</body>
</html> 